# -*- shell-script -*-

#
# Tests setting tags and including them in the output by appending them.
#

m4_include(common.m4)


home ..


[setup]


M4_SETUP_INSTALL_DATA_AND_INPUT(set-tags-and-list.list)


[act]


M4_EXECUTABLE --append-tags data/set-tags-and-list.list


[assert]


exitcode 0

pwd --rel-tmp

# Sort the two "section" - each originating from listing the files in the
# same directory.

shell sed -n '1,2p' ${SHELLCHECK_RESULT_DIR}/stdout | sort >  stdout-fixed.txt
shell sed -n '3,4p' ${SHELLCHECK_RESULT_DIR}/stdout | sort >> stdout-fixed.txt

contents stdout-fixed.txt <<EOF
data/dir/existing-file-1.txt:tag1
data/dir/existing-file-2.txt:tag1
data/dir/existing-file-1.txt:
data/dir/existing-file-2.txt:
EOF
