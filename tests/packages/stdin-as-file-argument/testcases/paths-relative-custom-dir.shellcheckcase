# -*- shell-script -*-

#
# WHEN stdin is used together with the option that specifies
# the directory which paths from stdin should be relative,
# THEN paths used by instructions
# SHOULD be relative the given custom directory
#

m4_include(common.m4)

home ..

[setup]

# If not for weird simptest behaviour, the following line
# would be: setup.install.run.cmdline:mkdir data-root-dir
# and data/dir would not be in the repo.
install data/dir data-root-dir
install data data-root-dir

stdin input/should-be-relative-cwd--other.list

[act]

M4_EXECUTABLE --stdin-paths-are-relative data-root-dir  -- -

[assert]

exitcode 0
#stdout   --rel-home output/paths-relative-custom-dir.txt
