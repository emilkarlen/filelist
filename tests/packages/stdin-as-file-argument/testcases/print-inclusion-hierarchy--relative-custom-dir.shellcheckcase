# -*- shell-script -*-

#
# WHEN stdin is used as a listfile on the command line,
# together with the specification of a custom relative directory
# THEN , in the inclusion hierarchy,
# SHOULD the customer relative directory should appear
# in the output.
#

m4_include(common.m4)

name:print-inclusion-hierarchy--relative-custom-dir
home:..

# If not for weird simptest behaviour, the following line
# would be: setup.install.run.cmdline:mkdir data-root-dir
# and data/dir would not be in the repo.
setup.install:data/dir:data-root-dir
setup.install:data:data-root-dir

test.stdin:input/should-be-relative-cwd--other.list

test.run.cmdline:M4_EXECUTABLE --print-inclusion-hierarchy --stdin-paths-are-relative data-root-dir  -- -

check.exitcode:0
check.stdout.file.eq:output/print-inclusion-hierarchy--relative-custom-dir.txt
